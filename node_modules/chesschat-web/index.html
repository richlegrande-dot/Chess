<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- BUILD VERSION: 2025-12-31-ADMIN-HEALTH-FIX -->
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/chess-icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    
    <!-- Google Fonts: Inter and Nunito -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="ChessChat with Wall-E - Your Friendly Chess Coach" />
    <meta name="description" content="Learn chess with Wall-E, your friendly AI coaching companion! Get personalized guidance, tactical tips, and encouraging feedback to improve your game." />
    <meta name="keywords" content="chess, AI chess coach, Wall-E, chess learning, chess training, friendly chess AI, chess improvement" />
    <meta name="author" content="ChessChat with Wall-E" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://chesschat.uk/" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#10b981" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://chesschat.uk/" />
    <meta property="og:title" content="ChessChat with Wall-E - Your Friendly Chess Coach ü§ñ" />
    <meta property="og:description" content="Learn chess with Wall-E! Personalized coaching, tactical analysis, and encouraging feedback to help you improve." />
    <meta property="og:image" content="https://chesschat.uk/og-image.png" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://chesschat.uk/" />
    <meta property="twitter:title" content="ChessChat with Wall-E - Your Friendly Chess Coach ü§ñ" />
    <meta property="twitter:description" content="Learn chess with Wall-E! Personalized coaching, tactical analysis, and encouraging feedback." />
    <meta property="twitter:image" content="https://chesschat.uk/og-image.png" />
    
    <!-- Preconnect to OpenAI API for faster requests -->
    <link rel="preconnect" href="https://api.openai.com" crossorigin />
    
    <!-- DNS Prefetch for Cloudflare -->
    <link rel="dns-prefetch" href="https://api.openai.com" />
    
    <!-- Preload critical resources -->
    <!-- Removed problematic modulepreload to fix production build -->
    
    <!-- Module compatibility polyfill -->
    <script>
      // Ensure global is available for module compatibility
      if (typeof global === 'undefined') {
        var global = globalThis;
      }
      
      // Check ES module support
      if (!('noModule' in document.createElement('script'))) {
        console.warn('‚ö†Ô∏è Limited ES module support detected');
      }
    </script>
    
    <title>ChessChat with Wall-E ü§ñ | Your Friendly Chess Coaching Companion</title>
  </head>
  <body>
    <div id="root">
      <!-- Immediate diagnostic - will be replaced by React or emergency fallback -->
      <div id="immediate-diagnostic" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(102, 126, 234, 0.2)); color: white; padding: 30px; border-radius: 16px; text-align: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; z-index: 10000; border: 2px solid rgba(16, 185, 129, 0.3);">
        <div style="font-size: 4rem; margin-bottom: 1rem; animation: wave 2s ease-in-out infinite;">ü§ñ</div>
        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">Wall-E is starting up...</div>
        <div style="font-size: 1rem; opacity: 0.8; margin-top: 0.5rem;">Getting ready to help you learn chess! ‚ú®</div>
      </div>
    </div>
    
    <!-- Emergency fallback if module loading fails -->
    <script>
      // Set a timeout to catch complete module loading failure
      setTimeout(() => {
        const root = document.getElementById('root');
        const debugStatus = document.getElementById('debug-status');
        
        // If no debug status appeared and root is empty, module failed to load
        if (!debugStatus && root && root.innerHTML === '') {
          console.error('üî• EMERGENCY: Module failed to load - no JavaScript execution detected');
          root.innerHTML = `
            <div style="min-height: 100vh; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%); color: #fff; padding: 2rem; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
              <div style="font-size: 4rem; margin-bottom: 1rem;">üö®</div>
              <h1 style="color: #ff4444; margin-bottom: 1rem;">ChessChat Module Loading Failed</h1>
              <p style="margin-bottom: 1rem; max-width: 500px; line-height: 1.5;">
                The JavaScript modules failed to load in this environment. This could be due to:
              </p>
              <ul style="text-align: left; margin-bottom: 2rem; color: #ccc;">
                <li>Network connectivity issues</li>
                <li>CDN or asset loading problems</li>
                <li>Browser compatibility issues</li>
                <li>Cloudflare Pages configuration problems</li>
              </ul>
              <button onclick="location.reload()" style="padding: 12px 24px; background: #fff; color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;">
                üîÑ Retry Loading
              </button>
              <p style="margin-top: 1rem; font-size: 0.8rem; opacity: 0.7;">
                Check browser console for detailed error information
              </p>
            </div>
          `;
        }
      }, 1500); // Wait 1.5 seconds for module to load
      
      // Also check immediately if script loading fails
      window.addEventListener('error', (e) => {
        if (e.filename && e.filename.includes('index-')) {
          console.error('üî• SCRIPT_LOAD_ERROR:', e);
          document.getElementById('root').innerHTML = `
            <div style="min-height: 100vh; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%); color: #fff; padding: 2rem; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
              <div style="font-size: 4rem; margin-bottom: 1rem;">üí•</div>
              <h1 style="color: #ff4444; margin-bottom: 1rem;">ChessChat Script Error</h1>
              <p>Main JavaScript file failed to load: ${e.filename}</p>
              <p style="font-size: 0.8rem; opacity: 0.7; margin-top: 1rem;">Line: ${e.lineno}, Column: ${e.colno}</p>
              <button onclick="location.reload()" style="padding: 12px 24px; background: #fff; color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 1rem;">üîÑ Retry</button>
            </div>
          `;
        }
      });
    </script>
    
    <!-- Enhanced load detection script -->
    <script>
      // Track if main script loads
      window.mainScriptLoaded = false;
      window.scriptLoadAttempts = 0;
      
      // Monitor script loading
      const scripts = document.querySelectorAll('script[type="module"]');
      scripts.forEach(script => {
        script.addEventListener('load', () => {
          console.log('‚úÖ Script loaded:', script.src);
        });
        script.addEventListener('error', (e) => {
          console.error('‚ùå Script failed to load:', script.src, e);
          const diagnostic = document.getElementById('immediate-diagnostic');
          if (diagnostic) {
            diagnostic.innerHTML = `
              <div style="font-size: 2rem; margin-bottom: 1rem; color: #ff4444;">üí•</div>
              <div style="color: #ff4444;">Asset Loading Failed</div>
              <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.5rem;">Cannot load: ${script.src}</div>
              <button onclick="location.reload()" style="padding: 8px 16px; background: #fff; color: #000; border: none; border-radius: 4px; cursor: pointer; margin-top: 1rem;">Retry</button>
            `;
          }
        });
      });
      
      // Check after delay if main script never signaled loading
      setTimeout(() => {
        if (!window.mainScriptLoaded && !document.getElementById('debug-status')) {
          console.error('üî• MODULE_EXECUTION_FAILED - Script loaded but never executed');
          const diagnostic = document.getElementById('immediate-diagnostic');
          if (diagnostic) {
            diagnostic.innerHTML = `
              <div style="font-size: 2rem; margin-bottom: 1rem; color: #ff4444;">‚ö†Ô∏è</div>
              <div style="color: #ff4444;">ES Module Execution Failed</div>
              <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.5rem;">Module loaded but never executed - likely compatibility issue</div>
              <button onclick="window.location.href='/fallback.html'" style="padding: 8px 16px; background: #fff; color: #000; border: none; border-radius: 4px; cursor: pointer; margin-top: 1rem;">Try Compatibility Mode</button>
              <button onclick="location.reload()" style="padding: 8px 16px; background: rgba(255,255,255,0.2); color: #fff; border: 1px solid #fff; border-radius: 4px; cursor: pointer; margin-top: 1rem; margin-left: 8px;">Retry</button>
            `;
          }
        }
      }, 3000);
    </script>
    
    <!-- Bootstrap script to help with ES module loading -->
    <script src="/bootstrap.js"></script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
