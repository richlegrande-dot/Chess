# Cloudflare Pages configuration
name = "chesschat-web"
compatibility_date = "2024-11-21"

# Pages configuration
pages_build_output_dir = "dist"

# Environment variables (set via Cloudflare dashboard or wrangler secret)
# 
# OPTIONAL:
#   DATABASE_URL - Prisma connection string (graceful degradation if missing)
#   RATE_LIMIT_PER_IP - Max requests per IP per minute (default: 30)
#   RATE_LIMIT_WINDOW - Rate limit window in seconds (default: 60)
#
# NOTE: NO API KEYS REQUIRED - Wall-E-only architecture (no external AI services)

# Note: KV namespaces should be bound via Cloudflare Dashboard for Pages projects
# Go to: Pages > chesschat-web > Settings > Functions > KV namespace bindings

# Service Bindings (Option B Hybrid Architecture)
# Connect Pages Functions to Worker Service
# Configure in dashboard: Pages > Settings > Functions > Service bindings
# Variable name: WALLE_ASSISTANT
# Service: walle-assistant
# Environment: production
[[env.production.services]]
binding = "WALLE_ASSISTANT"
service = "walle-assistant"
environment = "production"

[[env.preview.services]]
binding = "WALLE_ASSISTANT"
service = "walle-assistant"
environment = "staging"

[env.production]
# Production environment
name = "chesschat-web-production"

[env.preview]
# Preview/staging environment  
name = "chesschat-web-preview"

# Public environment variables (safe to expose to client)
[vars]
APP_VERSION = "1.2.0"
APP_NAME = "ChessChat Web"
PHASE = "5"
