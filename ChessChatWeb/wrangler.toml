# Cloudflare Pages configuration
name = "chesschat-web"
pages_build_output_dir = "dist"
compatibility_date = "2024-11-21"

# Note: Pages Functions configuration (bindings, env vars) must be set in Dashboard
# Dashboard: Pages > chesschat-web > Settings > Functions

# Environment variables (set via Cloudflare dashboard or wrangler secret)
# 
# REQUIRED (set in Dashboard > Settings > Environment variables):
#   ADMIN_PASSWORD - Admin portal password
#
# OPTIONAL:
#   DATABASE_URL - Prisma connection string (for legacy support)
#   RATE_LIMIT_PER_IP - Max requests per IP per minute (default: 30)
#   RATE_LIMIT_WINDOW - Rate limit window in seconds (default: 60)
#
# NOTE: NO API KEYS REQUIRED - Wall-E-only architecture (no external AI services)

# D1 Database Binding (set via Cloudflare Dashboard)
# Go to: Pages > chesschat-web > Settings > Functions > Bindings > D1 database
# Variable name: DB
# D1 database: Select your database

# KV Namespace Bindings (set via Cloudflare Dashboard)
# Go to: Pages > chesschat-web > Settings > Functions > Bindings > KV namespace
# Examples:
#   CHESS_RATE_LIMIT - Rate limiting storage
#   GAME_SESSIONS - Game session storage

# Service Bindings (Option B Hybrid Architecture)
# Connect Pages Functions to Worker Service
[[services]]
binding = "WALLE_ASSISTANT"
service = "walle-assistant-production"

[env.production]
# Production environment
name = "chesschat-web-production"

[[env.production.services]]
binding = "WALLE_ASSISTANT"
service = "walle-assistant-production"

[env.preview]
# Preview/staging environment  
name = "chesschat-web-preview"

[[env.preview.services]]
binding = "WALLE_ASSISTANT"
service = "walle-assistant-production"

# Public environment variables (safe to expose to client)
[vars]
APP_VERSION = "1.2.0"
APP_NAME = "ChessChat Web"
PHASE = "5"
